# -MD-
ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Pythonè„šæœ¬ï¼Œç”¨äºæ‰¹é‡æ¸…æ´—å’Œæ ‡å‡†åŒ–Markdownæ–‡ä»¶ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†ä»ä¸åŒæ¥æºè·å–çš„æ‚ä¹±Markdownæ–‡æ¡£ã€‚A powerful Python script for batch cleaning and standardizing Markdown files, particularly suitable for processing messy Markdown documents obtained from various sources.
# Markdownæ–‡ä»¶æ‰¹é‡æ¸…æ´—å·¥å…· / Markdown Batch Cleaner

[ä¸­æ–‡](#ä¸­æ–‡) | [English](#english)

---

## ä¸­æ–‡

### ç®€ä»‹
ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„Pythonè„šæœ¬ï¼Œç”¨äºæ‰¹é‡æ¸…æ´—å’Œæ ‡å‡†åŒ–Markdownæ–‡ä»¶ï¼Œç‰¹åˆ«é€‚åˆå¤„ç†ä»ä¸åŒæ¥æºè·å–çš„æ‚ä¹±Markdownæ–‡æ¡£ã€‚

### åŠŸèƒ½ç‰¹æ€§

#### æ ¸å¿ƒæ¸…æ´—åŠŸèƒ½
- **å›¾ç‰‡é“¾æ¥æ¸…ç†** - è‡ªåŠ¨åˆ é™¤Markdownä¸­çš„å›¾ç‰‡å¼•ç”¨ `![](images/xxx.jpg)`
- **ç©ºè¡Œä¼˜åŒ–** - ç§»é™¤å¤šä½™ç©ºè¡Œï¼Œä¿æŒæ–‡æ¡£ç»“æ„æ¸…æ™°
- **æ ‡é¢˜æ ‡å‡†åŒ–** - ç»Ÿä¸€æ ‡é¢˜æ ¼å¼ï¼Œä¿®å¤ä¸è§„èŒƒçš„`#`å·ä½¿ç”¨
- **è¡¨æ ¼æ ¼å¼åŒ–** - è‡ªåŠ¨å¯¹é½è¡¨æ ¼å†…å®¹ï¼Œæå‡å¯è¯»æ€§
- **ä»£ç å—æ ‡å‡†åŒ–** - ç»Ÿä¸€ä»£ç å—æ ‡è®°æ ¼å¼
- **URLä¿®å¤** - æ¸…ç†é“¾æ¥ä¸­çš„å¤šä½™ç©ºæ ¼
- **ç¼–ç ä¿®å¤** - è‡ªåŠ¨æ£€æµ‹å¹¶ä¿®å¤ä¸­æ–‡ç¼–ç é—®é¢˜ï¼ˆGBK/UTF-8ï¼‰

#### å®ç”¨ç‰¹æ€§
- **æ‰¹é‡å¤„ç†** - æ”¯æŒå•ä¸ªæ–‡ä»¶æˆ–æ•´ä¸ªç›®å½•é€’å½’å¤„ç†
- **å®‰å…¨å¤‡ä»½** - è‡ªåŠ¨åˆ›å»º`.bak`å¤‡ä»½æ–‡ä»¶ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±
- **çµæ´»é…ç½®** - æ”¯æŒå‘½ä»¤è¡Œå‚æ•°è°ƒèŠ‚æ¸…æ´—ä¸¥æ ¼åº¦
- **è¯¦ç»†æ—¥å¿—** - æä¾›å¤„ç†è¿›åº¦å’Œè¯¦ç»†æ“ä½œè®°å½•

### å®‰è£…å’Œä½¿ç”¨

#### ç¯å¢ƒè¦æ±‚
- Python 3.6+
- æ— éœ€é¢å¤–ä¾èµ–ï¼ˆåŸºç¡€ç‰ˆæœ¬ï¼‰

#### åŸºæœ¬ä½¿ç”¨
```bash
# æ¸…æ´—å•ä¸ªæ–‡ä»¶
python md_cleaner.py "document.md"

# æ¸…æ´—æ•´ä¸ªç›®å½•
python md_cleaner.py "/path/to/markdown/files"

# æ¸…æ´—å½“å‰ç›®å½•
python md_cleaner.py "."
```

#### é«˜çº§é€‰é¡¹
```bash
# è¯¦ç»†æ¨¡å¼ï¼ˆæ¨èï¼‰
python md_cleaner.py "." --verbose

# ä¸åˆ›å»ºå¤‡ä»½
python md_cleaner.py "." --no-backup

# ä¿ç•™å›¾ç‰‡é“¾æ¥
python md_cleaner.py "." --no-remove-images

# ä¸æ ¼å¼åŒ–è¡¨æ ¼
python md_cleaner.py "." --no-format-tables

# ç§»é™¤ç‰¹æ®Šå­—ç¬¦
python md_cleaner.py "." --remove-special-chars
```

### ä½¿ç”¨åœºæ™¯

#### é€‚åˆå¤„ç†
- ğŸ“š ç”µå­ä¹¦è½¬æ¢çš„Markdownæ–‡ä»¶
- ğŸ” ç½‘ç»œçˆ¬è™«æŠ“å–çš„æ–‡æ¡£
- ğŸ“„ OCRè¯†åˆ«åçš„æ–‡æœ¬
- ğŸ’¾ ä¸åŒç¼–è¾‘å™¨ç”Ÿæˆçš„æ··åˆæ ¼å¼
- ğŸ—‚ å¤šäººåä½œçš„é£æ ¼ä¸ä¸€è‡´æ–‡æ¡£

### é…ç½®è¯´æ˜
è„šæœ¬æ”¯æŒä»¥ä¸‹å¯è°ƒèŠ‚å‚æ•°ï¼š
- `--no-backup` - ç¦ç”¨å¤‡ä»½
- `--no-remove-images` - ä¿ç•™å›¾ç‰‡é“¾æ¥  
- `--no-format-tables` - ç¦ç”¨è¡¨æ ¼æ ¼å¼åŒ–
- `--remove-special-chars` - ç§»é™¤ç‰¹æ®Šå­—ç¬¦
- `--verbose` - è¯¦ç»†è¾“å‡ºæ¨¡å¼

---

## English

### Introduction
A powerful Python script for batch cleaning and standardizing Markdown files, particularly suitable for processing messy Markdown documents obtained from various sources.

### Features

#### Core Cleaning Functions
- **Image Link Cleaning** - Automatically removes image references like `![](images/xxx.jpg)`
- **Empty Line Optimization** - Removes excessive blank lines while maintaining document structure
- **Heading Standardization** - Normalizes heading formats and fixes improper `#` usage
- **Table Formatting** - Automatically aligns table content for better readability
- **Code Block Standardization** - Uniform code block markup formatting
- **URL Fixing** - Cleans up extra spaces in links
- **Encoding Repair** - Automatically detects and fixes Chinese encoding issues (GBK/UTF-8)

#### Practical Features
- **Batch Processing** - Supports single files or recursive directory processing
- **Safe Backup** - Automatically creates `.bak` backup files to prevent data loss
- **Flexible Configuration** - Command-line parameters to adjust cleaning strictness
- **Detailed Logging** - Provides processing progress and detailed operation records

### Installation & Usage

#### Requirements
- Python 3.6+
- No additional dependencies required (basic version)

#### Basic Usage
```bash
# Clean single file
python md_cleaner.py "document.md"

# Clean entire directory
python md_cleaner.py "/path/to/markdown/files"

# Clean current directory
python md_cleaner.py "."
```

#### Advanced Options
```bash
# Verbose mode (recommended)
python md_cleaner.py "." --verbose

# No backup creation
python md_cleaner.py "." --no-backup

# Keep image links
python md_cleaner.py "." --no-remove-images

# Disable table formatting
python md_cleaner.py "." --no-format-tables

# Remove special characters
python md_cleaner.py "." --remove-special-chars
```

### Use Cases

#### Ideal for Processing
- ğŸ“š Markdown files converted from e-books
- ğŸ” Documents scraped by web crawlers
- ğŸ“„ Text from OCR recognition
- ğŸ’¾ Mixed formats generated by different editors
- ğŸ—‚ Inconsistent style documents from collaborative work

### Configuration
The script supports the following adjustable parameters:
- `--no-backup` - Disable backup
- `--no-remove-images` - Keep image links
- `--no-format-tables` - Disable table formatting
- `--remove-special-chars` - Remove special characters
- `--verbose` - Verbose output mode

---

## License
MIT License

## Tags
```
markdown, text-processing, automation, python, data-cleaning, 
batch-processing, document-processing, formatting-tool
```
